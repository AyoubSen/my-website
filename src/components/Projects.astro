---
const projects = [
	{
		id: "tsw-german",
		title: "TSW German",
		description: "German sentence practice app with solo/co-op sessions, typing and multiple-choice modes, plus gamified progress tracking.",
		longDescription: "A web app for practicing German in short, game-like sessions. Users can translate German and English sentences in typing or multiple-choice mode, switch between solo and co-op practice, and track XP, streaks, combos, and accuracy over time. The app also includes category-based sentence browsing, profile stats with session history, and leaderboard comparison to keep daily learning engaging.",
		tags: ["React", "TanStack Start", "Clerk", "Convex", "Tailwind CSS"],
		github: "https://github.com/AyoubSen",
		liveUrl: "https://tsw-german.vercel.app/",
		screenshots: [],
		featured: true,
		number: "01",
	},
	{
		id: "chi-match",
		title: "Chi-Match",
		description: "Mobile matching app built with Expo & React Native. Uses Clerk for auth, Convex for real-time backend, and features smooth haptic feedback and native animations.",
		longDescription: "A full-featured mobile matching application built from the ground up with Expo and React Native. The app leverages Clerk for secure authentication flows and Convex as a real-time backend, ensuring instant data synchronization across users. Features include smooth haptic feedback, fluid native animations, and an intuitive swipe-based interface designed for engagement.",
		tags: ["React Native", "Expo", "Convex", "Clerk"],
		github: "https://github.com/AyoubSen",
		screenshots: [],
		featured: true,
		number: "02",
	},
	{
		id: "dofus-planner",
		title: "Dofus Planner",
		description: "Game planning tool built with Next.js and Supabase. Helps players organize and optimize their in-game strategies with a clean, responsive interface.",
		longDescription: "A planning and strategy tool for Dofus players, built with Next.js and backed by Supabase for persistent data storage and authentication. The app helps players organize builds, plan strategies, and optimize their in-game progression. Features a clean, responsive interface with dark mode support and real-time data syncing.",
		tags: ["Next.js", "Supabase", "React", "Tailwind"],
		github: "https://github.com/AyoubSen",
		liveUrl: "https://dofus-planner.vercel.app/",
		screenshots: [],
		featured: true,
		number: "03",
	},
	{
		id: "tsw-games",
		title: "TSW Games",
		description: "Multiplayer game platform using TanStack Start and PartyKit for real-time interactions. Features lobby systems, live game state sync, and responsive design.",
		longDescription: "A real-time multiplayer game platform built with TanStack Start and PartyKit for WebSocket-based interactions. Players can create and join lobbies, with live game state synchronization ensuring a seamless multiplayer experience. The architecture supports multiple game modes with shared infrastructure for matchmaking, scoring, and session management.",
		tags: ["TanStack Start", "PartyKit", "React", "WebSocket"],
		github: "https://github.com/AyoubSen",
		liveUrl: "https://tsw-games.netlify.app/",
		screenshots: [],
		featured: true,
		number: "04",
	},
	{
		id: "word-guesser",
		title: "Word Guesser",
		description: "Real-time multiplayer word guessing game with Socket.io. Animated UI with Framer Motion, live scoring, and room-based gameplay.",
		longDescription: "A multiplayer word guessing game where players compete in real-time rooms. Built with Next.js and Socket.io for low-latency communication, with Framer Motion powering smooth UI transitions and animations. Features include room-based gameplay, live scoring, round timers, and animated feedback for correct and incorrect guesses.",
		tags: ["Next.js", "Socket.io", "Framer Motion"],
		github: "https://github.com/AyoubSen",
		screenshots: [],
		featured: false,
		number: "05",
	},
	{
		id: "discord-bot",
		title: "Discord Companion Bot",
		description: "Feature-rich Discord bot built with Discord.js and Node.js. Handles server moderation, custom commands, and community engagement utilities.",
		longDescription: "A versatile Discord bot built with Discord.js and Node.js, designed to enhance server management and community engagement. Supports custom commands, automated moderation tools, and various utility features to streamline server administration and improve the user experience for community members.",
		tags: ["Discord.js", "Node.js", "JavaScript"],
		github: "https://github.com/AyoubSen/PoorLittleShitv1",
		screenshots: [],
		featured: false,
		number: "06",
	},
	{
		id: "clean-linkedin",
		title: "Clean LinkedIn",
		description: "Browser extension that removes visual clutter from LinkedIn's interface. Simple, effective, and focused on improving daily UX.",
		longDescription: "A lightweight browser extension that strips away visual noise from LinkedIn's interface â€” hiding promoted posts, unnecessary sidebars, and distracting UI elements. Built as a content script that injects targeted CSS overrides, making the daily LinkedIn experience cleaner and more focused on actual content.",
		tags: ["Browser Extension", "JavaScript", "CSS"],
		github: "https://github.com/AyoubSen",
		screenshots: [],
		featured: false,
		number: "07",
	},
];
const placeholderCount = (3 - (projects.length % 3)) % 3;
const placeholders = Array.from({ length: placeholderCount });
---

<section class="projects" id="projects">
	<div class="projects-inner">
		<div class="section-label reveal">
			<span class="label-line"></span>
			<span class="label-text">Projects</span>
		</div>

		<h2 class="projects-heading reveal reveal-delay-1">
			Selected work
		</h2>

		<div class="projects-grid reveal reveal-delay-2">
			{projects.map((project) => (
				<div class:list={["project-card", { featured: project.featured }]} data-project={project.id}>
					<div class="card-top">
						<span class="card-number">{project.number}</span>
						<svg class="card-eye" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
							<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
							<circle cx="12" cy="12" r="3"></circle>
						</svg>
					</div>
					<h3 class="card-title">{project.title}</h3>
					<p class="card-desc">{project.description}</p>
					<div class="card-tags">
						{project.tags.map((tag) => (
							<span class="card-tag">{tag}</span>
						))}
					</div>
				</div>
			))}
			{placeholders.map(() => (
				<div class="project-card project-card-placeholder" aria-hidden="true">
					<div class="placeholder-inner">
						<span class="placeholder-text">More projects soon</span>
					</div>
				</div>
			))}
		</div>

		<div class="projects-more reveal reveal-delay-3">
			<a href="https://github.com/AyoubSen" target="_blank" rel="noopener" class="more-link">
				View all projects on GitHub
				<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<line x1="5" y1="12" x2="19" y2="12"></line>
					<polyline points="12 5 19 12 12 19"></polyline>
				</svg>
			</a>
		</div>
	</div>
</section>

<!-- Modal -->
<div class="modal-overlay" id="projectModal">
	<div class="modal">
		<button class="modal-close" id="modalClose" aria-label="Close modal">
			<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
				<line x1="18" y1="6" x2="6" y2="18"></line>
				<line x1="6" y1="6" x2="18" y2="18"></line>
			</svg>
		</button>

		<div class="modal-screenshots" id="modalScreenshots">
			<div class="screenshot-placeholder">
				<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
					<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
					<circle cx="8.5" cy="8.5" r="1.5"></circle>
					<polyline points="21 15 16 10 5 21"></polyline>
				</svg>
				<span>Screenshots coming soon</span>
			</div>
		</div>

		<div class="modal-body">
			<div class="modal-header">
				<span class="modal-number" id="modalNumber"></span>
				<h3 class="modal-title" id="modalTitle"></h3>
			</div>

			<p class="modal-description" id="modalDescription"></p>

			<div class="modal-tags" id="modalTags"></div>

			<div class="modal-actions">
				<a href="#" target="_blank" rel="noopener" class="modal-live" id="modalLive">
					<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
						<circle cx="12" cy="12" r="10"></circle>
						<line x1="2" y1="12" x2="22" y2="12"></line>
						<path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
					</svg>
					Live Demo
					<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
						<line x1="7" y1="17" x2="17" y2="7"></line>
						<polyline points="7 7 17 7 17 17"></polyline>
					</svg>
				</a>
				<a href="#" target="_blank" rel="noopener" class="modal-github" id="modalGithub">
					<svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
						<path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
					</svg>
					GitHub
					<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
						<line x1="7" y1="17" x2="17" y2="7"></line>
						<polyline points="7 7 17 7 17 17"></polyline>
					</svg>
				</a>
			</div>
		</div>
	</div>
</div>

<script define:vars={{ projects }}>
	const modal = document.getElementById('projectModal');
	const modalClose = document.getElementById('modalClose');
	const modalTitle = document.getElementById('modalTitle');
	const modalNumber = document.getElementById('modalNumber');
	const modalDescription = document.getElementById('modalDescription');
	const modalTags = document.getElementById('modalTags');
	const modalGithub = document.getElementById('modalGithub');
	const modalLive = document.getElementById('modalLive');

	function openModal(projectId) {
		const project = projects.find(p => p.id === projectId);
		if (!project) return;

		modalTitle.textContent = project.title;
		modalNumber.textContent = project.number;
		modalDescription.textContent = project.longDescription;
		modalGithub.href = project.github;

		if (project.liveUrl) {
			modalLive.href = project.liveUrl;
			modalLive.style.display = 'inline-flex';
		} else {
			modalLive.style.display = 'none';
		}

		modalTags.innerHTML = '';
		project.tags.forEach(tag => {
			const span = document.createElement('span');
			span.className = 'modal-tag';
			span.textContent = tag;
			modalTags.appendChild(span);
		});

		modal.classList.add('active');
		document.body.style.overflow = 'hidden';
	}

	function closeModal() {
		modal.classList.remove('active');
		document.body.style.overflow = '';
	}

	document.querySelectorAll('.project-card[data-project]').forEach(card => {
		card.addEventListener('click', () => {
			const projectId = card.dataset.project;
			openModal(projectId);
		});
	});

	modalClose.addEventListener('click', closeModal);

	modal.addEventListener('click', (e) => {
		if (e.target === modal) closeModal();
	});

	document.addEventListener('keydown', (e) => {
		if (e.key === 'Escape') closeModal();
	});
</script>

<style>
	.projects {
		padding: 8rem 2rem;
		border-top: 1px solid var(--border);
	}

	.projects-inner {
		max-width: 1000px;
		margin: 0 auto;
	}

	.section-label {
		display: flex;
		align-items: center;
		gap: 1rem;
		margin-bottom: 1.5rem;
	}

	.label-line {
		width: 40px;
		height: 1px;
		background: var(--accent);
	}

	.label-text {
		font-family: var(--font-mono);
		font-size: 0.8rem;
		color: var(--accent);
		text-transform: uppercase;
		letter-spacing: 0.1em;
	}

	.projects-heading {
		font-size: clamp(1.75rem, 3.5vw, 2.5rem);
		font-weight: 700;
		letter-spacing: -0.03em;
		margin-bottom: 3rem;
	}

	.projects-grid {
		display: grid;
		grid-template-columns: repeat(3, 1fr);
		gap: 1px;
		background: var(--border);
		border: 1px solid var(--border);
		border-radius: 16px;
		overflow: hidden;
	}

	.project-card {
		background: var(--bg-elevated);
		padding: 2rem;
		display: flex;
		flex-direction: column;
		transition: all 0.3s ease;
		cursor: pointer;
		text-decoration: none;
		color: inherit;
	}

	.project-card:hover {
		background: var(--bg-card);
	}

	.project-card:hover .card-eye {
		color: var(--accent);
	}

	.project-card:hover .card-title {
		color: var(--accent);
	}

	.project-card.featured {
		grid-column: span 1;
	}

	.project-card-placeholder {
		cursor: default;
		pointer-events: none;
		background: var(--bg-elevated);
	}

	.placeholder-inner {
		height: 100%;
		min-height: 140px;
		border: 1px dashed var(--border);
		border-radius: 10px;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.placeholder-text {
		font-size: 0.72rem;
		font-family: var(--font-mono);
		color: var(--text-muted);
		text-transform: uppercase;
		letter-spacing: 0.08em;
	}

	.card-top {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: 1.5rem;
	}

	.card-number {
		font-family: var(--font-mono);
		font-size: 0.75rem;
		color: var(--text-muted);
	}

	.card-eye {
		color: var(--text-muted);
		transition: all 0.3s ease;
		opacity: 0.5;
	}

	.project-card:hover .card-eye {
		opacity: 1;
	}

	.card-title {
		font-size: 1.25rem;
		font-weight: 700;
		letter-spacing: -0.02em;
		margin-bottom: 0.75rem;
		transition: color 0.3s;
	}

	.card-desc {
		font-size: 0.875rem;
		line-height: 1.6;
		color: var(--text-muted);
		margin-bottom: 1.5rem;
		flex: 1;
	}

	.card-tags {
		display: flex;
		flex-wrap: wrap;
		gap: 0.4rem;
	}

	.card-tag {
		font-size: 0.7rem;
		font-family: var(--font-mono);
		color: var(--text-muted);
		padding: 0.25rem 0.6rem;
		border: 1px solid var(--border);
		border-radius: 4px;
	}

	.projects-more {
		margin-top: 3rem;
		text-align: center;
	}

	.more-link {
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		font-size: 0.9rem;
		color: var(--text-muted);
		transition: color 0.2s;
		font-family: var(--font-mono);
	}

	.more-link:hover {
		color: var(--accent);
	}

	.more-link svg {
		transition: transform 0.2s;
	}

	.more-link:hover svg {
		transform: translateX(4px);
	}

	/* Modal */
	.modal-overlay {
		position: fixed;
		inset: 0;
		z-index: 200;
		background: rgba(0, 0, 0, 0.7);
		backdrop-filter: blur(8px);
		display: flex;
		align-items: center;
		justify-content: center;
		padding: 2rem;
		opacity: 0;
		pointer-events: none;
		transition: opacity 0.3s ease;
	}

	.modal-overlay.active {
		opacity: 1;
		pointer-events: all;
	}

	.modal {
		background: var(--bg-elevated);
		border: 1px solid var(--border);
		border-radius: 16px;
		max-width: 640px;
		width: 100%;
		max-height: 85vh;
		overflow-y: auto;
		position: relative;
		transform: translateY(20px) scale(0.97);
		transition: transform 0.3s cubic-bezier(0.22, 1, 0.36, 1);
	}

	.modal-overlay.active .modal {
		transform: translateY(0) scale(1);
	}

	.modal-close {
		position: absolute;
		top: 1rem;
		right: 1rem;
		z-index: 10;
		background: var(--bg-card);
		border: 1px solid var(--border);
		border-radius: 8px;
		color: var(--text-muted);
		padding: 0.5rem;
		cursor: pointer;
		transition: all 0.2s;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.modal-close:hover {
		color: var(--text);
		border-color: var(--text-muted);
	}

	.modal-screenshots {
		border-bottom: 1px solid var(--border);
		border-radius: 16px 16px 0 0;
		overflow: hidden;
	}

	.screenshot-placeholder {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		gap: 0.75rem;
		padding: 4rem 2rem;
		background: var(--bg);
		color: var(--text-muted);
	}

	.screenshot-placeholder span {
		font-size: 0.8rem;
		font-family: var(--font-mono);
	}

	.modal-body {
		padding: 2rem;
	}

	.modal-header {
		margin-bottom: 1.25rem;
	}

	.modal-number {
		font-family: var(--font-mono);
		font-size: 0.7rem;
		color: var(--text-muted);
		display: block;
		margin-bottom: 0.5rem;
	}

	.modal-title {
		font-size: 1.5rem;
		font-weight: 700;
		letter-spacing: -0.03em;
	}

	.modal-description {
		font-size: 0.95rem;
		line-height: 1.75;
		color: var(--text-muted);
		margin-bottom: 1.5rem;
	}

	.modal-tags {
		display: flex;
		flex-wrap: wrap;
		gap: 0.4rem;
		margin-bottom: 2rem;
	}

	:global(.modal-tag) {
		font-size: 0.7rem;
		font-family: var(--font-mono);
		color: var(--text-muted);
		padding: 0.3rem 0.7rem;
		border: 1px solid var(--border);
		border-radius: 4px;
	}

	.modal-actions {
		display: flex;
		gap: 0.75rem;
		padding-top: 1.5rem;
		border-top: 1px solid var(--border);
	}

	.modal-live {
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		padding: 0.7rem 1.25rem;
		background: var(--accent);
		color: var(--bg);
		border: 1px solid var(--accent);
		border-radius: 10px;
		font-size: 0.85rem;
		font-weight: 600;
		transition: all 0.2s;
		text-decoration: none;
	}

	.modal-live:hover {
		background: var(--accent-dim);
		border-color: var(--accent-dim);
	}

	.modal-github {
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		padding: 0.7rem 1.25rem;
		border: 1px solid var(--border);
		border-radius: 10px;
		font-size: 0.85rem;
		color: var(--text-muted);
		transition: all 0.2s;
		text-decoration: none;
	}

	.modal-github:hover {
		border-color: var(--text-muted);
		color: var(--text);
	}

	/* Modal scrollbar */
	.modal::-webkit-scrollbar {
		width: 4px;
	}
	.modal::-webkit-scrollbar-track {
		background: transparent;
	}
	.modal::-webkit-scrollbar-thumb {
		background: var(--border);
		border-radius: 2px;
	}

	@media (max-width: 900px) {
		.projects-grid {
			grid-template-columns: repeat(2, 1fr);
		}

		.project-card-placeholder {
			display: none;
		}
	}

	@media (max-width: 640px) {
		.projects {
			padding: 5rem 1.25rem;
		}

		.projects-grid {
			grid-template-columns: 1fr;
		}

		.project-card {
			padding: 1.5rem;
		}

		.modal-overlay {
			padding: 1rem;
			align-items: flex-end;
		}

		.modal {
			max-height: 90vh;
			border-radius: 16px 16px 0 0;
		}

		.modal-body {
			padding: 1.5rem;
		}
	}
</style>
